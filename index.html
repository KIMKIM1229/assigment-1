<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>瑜伽動作清單</title>
    <script
      type="module"
      src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"
    ></script>
    <script
      nomodule
      src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css"
    />
    <style>
      body {
        font-family: system-ui;
      }
      .item-content {
        width: 100%;
      }
      .item-title {
        font-weight: bold;
        font-size: 1.1em;
      }
      .item-subtitle {
        color: var(--ion-color-medium);
        margin: 0.25rem 0;
      }
      .item-details {
        font-size: 0.95em;
        margin-bottom: 0.5rem;
      }
      .media {
        margin-top: 0.5rem;
      }
      ion-img {
        max-height: 200px;
        object-fit: cover;
      }
      .tag-container {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.5rem;
      }
    </style>
  </head>
  <body>
    <ion-app>
      <ion-header>
        <ion-toolbar>
          <ion-title>瑜伽動作清單</ion-title>
        </ion-toolbar>
        <ion-searchbar placeholder="搜尋..." debounce="500"></ion-searchbar>
        <ion-select id="categorySelect" label="分類" interface="popover">
          <ion-select-option value="">全部</ion-select-option>
          <ion-select-option value="初學者">初學者</ion-select-option>
          <ion-select-option value="進階">進階</ion-select-option>
          <ion-select-option value="放鬆">放鬆</ion-select-option>
        </ion-select>
      </ion-header>

      <ion-content>
        <ion-list id="poseList">
          <!-- 清單將由 JavaScript 動態生成 -->
        </ion-list>
      </ion-content>
    </ion-app>

    <script>
      const items = [
        {
          title: '下犬式',
          level: '初階',
          benefits: '伸展脊椎、腿後肌群',
          caution: '肩頸受傷者請避免',
          category: '初學者',
          tags: ['腿部', '背部'],
          imageUrl: 'https://hips.hearstapps.com/hmg-prod/images/gettyimages-1066259462-665f07385f296.jpg?crop=1.00xw:0.755xh;0,0&resize=1200:*',
          videoUrl: 'https://www.youtube.com/embed/YwFOL6vFfhE'
        },
        {
          title: '戰士二式',
          level: '中階',
          benefits: '強化腿部、提升穩定性',
          caution: '膝蓋問題請注意角度',
          category: '強化',
          tags: ['腿部', '核心'],
          imageUrl: 'https://via.placeholder.com/300x300?text=Warrior+II',
          videoUrl: 'https://www.youtube.com/embed/u1a8ICIQS90'
        },
        {
          title: '樹式',
          level: '初階',
          benefits: '提升平衡感與專注力',
          caution: '避免站不穩時跌倒',
          category: '平衡',
          tags: ['平衡', '集中'],
          imageUrl: 'https://via.placeholder.com/300x300?text=Tree+Pose',
          videoUrl: 'https://www.youtube.com/embed/s8n-IU7e1V4'
        }
      ];

      let searchKeyword = '';
      let selectedCategory = '';

      // 更新顯示清單的函數
      function updateList() {
        const list = document.querySelector('ion-list');
        list.innerHTML = '';

        const filteredItems = items.filter(item => {
          // 過濾邏輯：同時考慮搜尋關鍵字和分類
          const matchesSearch = item.title.toLowerCase().includes(searchKeyword.toLowerCase()) ||
                                item.benefits.toLowerCase().includes(searchKeyword.toLowerCase());
          const matchesCategory = selectedCategory ? item.category === selectedCategory : true;

          return matchesSearch && matchesCategory;
        });

        // 將過濾後的項目動態顯示
        filteredItems.forEach(item => {
          const ionItem = document.createElement('ion-item');
          ionItem.innerHTML = `
            <div class="item-content">
              <div class="item-title">${item.title}</div>
              <div class="item-subtitle">難度：${item.level}</div>
              <div class="item-details">效果：${item.benefits}<br>注意事項：${item.caution}</div>
              <img src="${item.imageUrl}" alt="${item.title}" style="width: 100%; max-width: 300px; margin-top: 0.5rem;" />
              <div style="margin-top: 0.5rem;">
                <iframe width="100%" height="200" src="${item.videoUrl}" frameborder="0" allowfullscreen></iframe>
              </div>
              <div class="tag-container">
                <ion-chip size="small" color="primary">${item.category}</ion-chip>
                ${item.tags.map(tag => `<ion-chip size="small">${tag}</ion-chip>`).join('')}
              </div>
            </div>
          `;
          list.appendChild(ionItem);
        });
      }

      // 監聽搜尋框的輸入
      document.querySelector('ion-searchbar').addEventListener('ionInput', (event) => {
        searchKeyword = event.target.value;
        updateList();
      });

      // 監聽分類選擇改變事件
      document.querySelector('ion-select').addEventListener('ionChange', (event) => {
        selectedCategory = event.detail.value;
        updateList();
      });

      // 當頁面加載完成時顯示清單
      document.addEventListener('DOMContentLoaded', () => {
        updateList();
      });
    </script>
  </body>
</html>

